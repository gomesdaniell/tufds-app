<h2>Orixás na Umbanda</h2>

<p>
  Uma das mais impressionantes marcas do estudo da Umbanda é a influência que os
  Orixás exercem em seus filhos — influência essa que não se descobre pela data
  de nascimento, mas por rituais próprios da religião.
</p>

<p>
  Aqui falamos dos Orixás que fazem parte da linha de trabalho do TUFDS, suas cores,
  fundamentos, arquétipos dos filhos, algumas ervas associadas e formas de entrega.
</p>

<p>
  Também incluímos referências de banhos e amalás, sempre dentro da forma como
  trabalhamos na casa.
</p>

<hr>

<h3 style="margin-top:24px;">Escolha um Orixá para conhecer</h3>

<!-- BOTÕES DOS ORIXÁS -->
<div class="orixa-buttons" style="
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px;
  margin-top:16px;
">
  <button class="orixa-btn" data-orixa="oxala">Oxalá</button>
  <button class="orixa-btn" data-orixa="ogum">Ogum</button>
  <button class="orixa-btn" data-orixa="iansa">Iansã</button>
  <button class="orixa-btn" data-orixa="iemanja">Iemanjá</button>
  <button class="orixa-btn" data-orixa="oxum">Oxum</button>
  <button class="orixa-btn" data-orixa="xango">Xangô</button>
  <button class="orixa-btn" data-orixa="oxossi">Oxóssi</button>
  <button class="orixa-btn" data-orixa="obaluae">Obaluaê</button>
  <button class="orixa-btn" data-orixa="nana">Nanã</button>
</div>

<style>
  .orixa-btn{
    padding:10px 12px;
    font-size:14px;
    border-radius:999px;
    border:1px solid #e5e7eb;
    background:#f9fafb;
    cursor:pointer;
    text-align:center;
    transition:background .2s, transform .1s, box-shadow .1s;
    font-weight:600;
  }
  .orixa-btn:hover{
    background:#eef2ff;
    transform:translateY(-1px);
    box-shadow:0 1px 3px rgba(15,23,42,.1);
  }
  .orixa-btn.active{
    background:#0f766e;
    color:#ecfdf5;
    border-color:#0f766e;
  }
  .orixa-conteudo-card{
    margin-top:20px;
    padding:18px 20px;
    border-radius:16px;
    border:1px solid #e5e7eb;
    background:#ffffff;
  }
</style>

<!-- ONDE O TEXTO DO ORIXÁ VAI APARECER -->
<div id="orixaConteudo" class="orixa-conteudo-card">
  <p class="muted">Selecione um Orixá para ver a descrição.</p>
</div>

<script>
/**
 * Versão para Vercel (arquivos estáticos em /public/partials).
 * A página-mãe chamará window.initOrixas(rootEl) após injetar este partial
 * e sempre que a aba "Orixás" for aberta.
 */
window.initOrixas = function initOrixas(rootEl){
  const root = rootEl && rootEl.querySelector ? rootEl : document;
  if (root.__orixas_bound__) return;            // evita bind duplicado
  root.__orixas_bound__ = true;

  const btns = root.querySelectorAll('.orixa-btn');
  const container = root.querySelector('#orixaConteudo');
  if (!btns.length || !container) return;

  // Mapeia "chave" -> NomeDoArquivo.html (exatamente como está em /public/partials)
  const mapaArquivos = {
    oxala:   'Oxala',
    ogum:    'Ogum',
    iansa:   'Iansa',
    iemanja: 'Iemanja',
    oxum:    'Oxum',
    xango:   'Xango',
    oxossi:  'Oxossi',
    obaluae: 'Obaluae',
    nana:    'Nana'
  };

  function setLoading(on=true){
    container.innerHTML = on
      ? '<p class="muted">Carregando…</p>'
      : '';
  }

  async function carregarOrixa(chave){
    const base = '/partials';                    // servido a partir de /public/partials
    const arquivo = mapaArquivos[chave];
    if (!arquivo) return;

    setLoading(true);
    // cache-busting leve quando precisar (troque v conforme release)
    const url = `${base}/${encodeURIComponent(arquivo)}.html?v=1`;

    try{
      const resp = await fetch(url, { cache: 'no-store' });
      if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
      const html = await resp.text();
      container.innerHTML = html || '<p class="muted">Sem conteúdo para este Orixá.</p>';
    }catch(e){
      console.error('Falha ao carregar partial de Orixá:', e);
      container.innerHTML = '<p class="muted">Conteúdo indisponível no momento.</p>';
    }
  }

  // liga cliques (escopo limitado ao root)
  btns.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const chave = btn.dataset.orixa;

      btns.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');

      carregarOrixa(chave);
    });
  });

  // Seleção padrão (Oxalá)
  const btnOxala = root.querySelector('.orixa-btn[data-orixa="oxala"]');
  if (btnOxala && !btnOxala.classList.contains('active')) {
    btnOxala.classList.add('active');
    carregarOrixa('oxala');
  }
};
</script>
