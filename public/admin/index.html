<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Painel Interno – TUFDS</title>
<style>
  :root{
    --bg:#f3f4f6; --card:#fff; --text:#111827; --muted:#6b7280;
    --border:#e5e7eb; --accent:#0f766e; --accent-2:#0d5f57;
  }
  *{ box-sizing:border-box }
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto;
    background:var(--bg); color:var(--text);
    display:flex; flex-direction:column; min-height:100vh;
  }

  /* Cabeçalho fixo */
  header{
    background:var(--accent);
    color:#fff;
    padding:16px 24px;
    display:flex; justify-content:space-between; align-items:center;
    box-shadow:0 2px 6px rgba(0,0,0,.1);
  }
  header h1{ margin:0; font-size:20px }
  header .user{
    display:flex; align-items:center; gap:10px;
    font-size:15px;
  }
  button.logout{
    background:#fff2; border:0; border-radius:999px;
    padding:6px 12px; color:#fff; cursor:pointer;
  }
  button.logout:hover{ background:#fff3 }

  /* Menu de abas */
  nav{
    background:#fff; border-bottom:1px solid var(--border);
    display:flex; gap:10px; padding:10px 16px;
    flex-wrap:wrap;
  }
  nav button{
    background:none; border:1px solid var(--border);
    border-radius:10px; padding:8px 14px;
    cursor:pointer; color:var(--text);
    font-weight:500; transition:.15s;
  }
  nav button:hover{ background:#f9fafb }
  nav button.active{
    background:var(--accent); color:#fff; border-color:var(--accent);
  }

  /* Conteúdo das abas */
  main{
    flex:1;
    padding:24px;
    max-width:1200px; margin:0 auto;
  }

  /* Loader simples */
  #loader{
    text-align:center; padding:40px; color:var(--muted);
  }
</style>
<script>
async function loadPartial(url) {
  // evita cache do navegador
  const res = await fetch(url, { cache: 'no-store' });
  const txt = await res.text();

  const view = document.getElementById('view');

  // Monta um container temporário para separar scripts do html
  const tmp = document.createElement('div');
  tmp.innerHTML = txt;

  // Coleta e remove os <script> do fragmento
  const scripts = Array.from(tmp.querySelectorAll('script'));
  scripts.forEach(s => s.parentNode.removeChild(s));

  // Injeta o HTML (sem scripts) no container
  view.innerHTML = tmp.innerHTML;

  // Reexecuta os scripts na ordem
  for (const s of scripts) {
    const n = document.createElement('script');
    if (s.src) n.src = s.src;
    if (s.type) n.type = s.type;           // preserva type/module se tiver
    n.textContent = s.textContent;         // para scripts inline
    document.body.appendChild(n);
    // opcional: remover após carregar
    // n.remove();
  }
}
</script>

</head>

<body>
  <header>
    <h1>Painel Interno – TUFDS</h1>
    <div class="user">
      <span id="user-name">Filho do Sagrado</span>
      <button class="logout" onclick="sair()">Sair</button>
    </div>
  </header>

  <nav>
    <button class="active" onclick="loadTab('/public/admin/partials/FinanceiroView.html', this)">Transparência Financeira</button>
    <button onclick="loadTab('/public/admin/partials/Presencas.html', this)">Registro de Presenças</button>
    <button onclick="loadTab('/public/admin/partials/Faltas.html', this)">Controle de Faltas</button>
    <button onclick="loadTab('/public/admin/partials/Aulas.html', this)">Aulas de Desenvolvimento</button>
    <button onclick="loadTab('/public/admin/partials/Desenvolvimento.html', this)">Desenvolvimento Individual</button>
    <button onclick="loadTab('/public/admin/partials/Aniversariantes.html', this)">Aniversariantes</button>
  </nav>

  <main id="content">
    <div id="loader">Carregando módulo padrão...</div>
  </main>

  <script>
    // Carrega a aba padrão ao abrir
    window.addEventListener('DOMContentLoaded',()=>{
      const first = document.querySelector('nav button.active');
      loadTab('/public/admin/partials/FinanceiroView.html', first);
    });
  </script>
</body>
</html>
